<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quickly evaluate captured side effects • collateral</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Quickly evaluate captured side effects">
<meta property="og:description" content="The purrr package allows you to capture the side effects (errors, warning, messages and other output) of functions using safely() and quietly(). Using collateral, you can quickly see which elements of a list (or list-column) returned results, which threw errors and which returned warnings or other output.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">collateral</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/collateral.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rensa/collateral">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="collateral" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#collateral" class="anchor"></a>collateral <img src="reference/figures/logo.svg" align="right" width="180px">
</h1></div>
<p>Automatically map complex operations <code>safely</code> or <code>quietly</code>, and quickly see the captured side effects.</p>
<p>The <code>collateral</code> package extends the power of <a href="https://purrr.tidyverse.org/reference/safely.html"><code><a href="http://www.rdocumentation.org/packages/purrr/topics/safely">purrr::safely()</a></code></a> and <code><a href="http://www.rdocumentation.org/packages/purrr/topics/safely">purrr::quietly()</a></code>, providing variants of <a href="https://purrr.tidyverse.org/reference/map.html"><code>map()</code></a>—<code>map_safely()</code> and <code>map_quietly()</code>—that automatically apply the appropriate function wrapper <em>and</em> print the resulting output nicely.</p>
<p>This is especially useful for tidy workflows: you can <a href="https://tidyr.tidyverse.org/reference/nest.html"><code>nest()</code></a> a data frame, apply a complex operation (such as building a regression model or building and saving a plot) to each group and quickly see which groups need to be inspected in more detail:</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>We’ll submit to CRAN soon, but for now, use <a href="https://cran.r-project.org/web/packages/devtools/index.html"><code>devtools</code></a> to install <code>collateral</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">'rensa/collateral'</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">library</span>(collateral)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">test =</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="co"># tidy up and trim down for the example</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span>mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">"car"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="st">  </span><span class="kw">as_data_frame</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">  </span><span class="kw">select</span>(car, cyl, disp, wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">  </span><span class="co"># spike some rows in cyl == 4 to make them fail</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">wt =</span> dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span>(</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    wt <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="op">-</span>wt,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>wt)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="st">  </span><span class="co"># nest and do some operations quietly()</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>cyl) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">qlog =</span> <span class="kw">map_quietly</span>(data, <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(.<span class="op">$</span>wt)))</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">test</a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; # A tibble: 3 x 4</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;     cyl data              qlog</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt;   &lt;dbl&gt; &lt;list&gt;            &lt;collat&gt;</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; 1     6 &lt;tibble [7 x 3]&gt;  R O _ _</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; 2     4 &lt;tibble [11 x 3]&gt; R O _ W</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; 3     8 &lt;tibble [14 x 3]&gt; R O _ _</span></a></code></pre></div>
<p><img src="reference/figures/collateral_example.png" alt="Example of styled collateral output"></p>
<p><code>collateral</code> uses <code>pillar</code> to style output, so supported terminals will also color the output! Properly styling knitted output is still on the to-do list, though.</p>
<p>If you’re a fan of iterating over two or more inputs in lockstep, then <code>map2()</code> and <code>pmap()</code> variants are also provided:</p>
<ul>
<li>
<code>map2_safely()</code>,</li>
<li>
<code>map2_quietly()</code>,</li>
<li>
<code>pmap_safely()</code>, and</li>
<li>
<code>pmap_quietly()</code>.</li>
</ul>
</div>
<div id="support" class="section level2">
<h2 class="hasAnchor">
<a href="#support" class="anchor"></a>Support</h2>
<p>If you have a problem with <code>collateral</code>, please don’t hesitate to <a href="https://github.com/rensa/collateral/issues/new">file an issue</a> or <a href="twitter.com/rensa_co">get in touch with me</a>!</p>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/rensa/collateral">https://​github.com/​rensa/​collateral</a>
</li>
<li>Report a bug at <br><a href="https://github.com/rensa/collateral/issues">https://​github.com/​rensa/​collateral/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://rensa.co"><img src="https://rensa.co/assets/me.jpg" height="48"></a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5024-6207" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://rensa.co"><img src="https://rensa.co/assets/me.jpg" height="48"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
